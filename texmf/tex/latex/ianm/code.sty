\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{code}[2008/03/26]
\RequirePackage{listings}

\def\@codelanguage{java}

\DeclareOption{c++}{\def\@codelanguage{c++}}
\DeclareOption{java}{\def\@codelanguage{java}}
\DeclareOption{matlab}{\def\@codelanguage{matlab}}
\DeclareOption{pascal}{\def\@codelanguage{pascal}}
\DeclareOption{fortran}{\def\@codelanguage{fortran}}
\ProcessOptions\relax

\lstdefinestyle{std}{%
basicstyle=\small,
showstringspaces=false,%
extendedchars=true}

\newcommand{\selectcodelanguage}[1]{\def\@codelanguage{#1}}

\newcommand{\code}[1][]{\lstinline[style=std,language=\@codelanguage,#1]}

\newcommand{\inputcode}[2][]{\lstinputlisting[style=std,language=\@codelanguage,#1]{#2}}

\lstnewenvironment{displaycode}[1][]{\lstset{style=std,language=\@codelanguage,#1}}{}
